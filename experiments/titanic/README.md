# Titanicコンペ

- **データの取得**
    - 学習データ、テストデータ、Kaggle投稿用のデータ形式（Submmision）
- **データ分析の準備**
    - ランダムシード値の設定
- **データの概要を把握する**
    - データの数を確認する
    - データの先頭行を確認する
    - データの方を確認する
    - データの統計量を確認する
    - カテゴリ変数を確認する
    - 欠損地を確認する
- **データを可視化する**
  - 可視化用のライブラリをインポートする
  - Survivedに関するデータを可視化する
    - DataFrameから任意の列を抽出する
    - **可視化したいデータから欠損値を除外する**
    - EmbarkedとSurvivedの値で集計する
    - データを横持ちに変換する
    - 積み上げ縦棒グラフで可視化する
    - 数値で確認する
    - 性別やチケットの階級について可視化する
    - 年代ごとの生存率をヒストグラムで可視化する
    - カテゴリ変数をダミー変数化する
    - 相関行列を作成する
    - ヒートマップで可視化する
- **前処理**・特徴量の生成
  - 前処理で注目するデータ
  - 学習データとテストデータを統合する
  - 全体データで欠損値の数を確認する
  - 欠損データを穴埋めする（Fare）
  - なめの敬称に注目する
  - 敬称を変数として追加する
  - 各敬称ごとの人数をカウントする
  - 敬称ごとの年齢分布を確認する
  - 敬称ごとの年齢の平均値を確認する
  - 敬称ごとの生存率の違いについて確認する
  - 年齢が欠損しているものは、敬称ごとの平均年齢で補完する
  - 家族人数を追加する
  - 同線しているk族人数が０人（一人乗船）かどうかを表す　aloneという変数を追加する
  - 不要な変数を削除する
  - カテゴリ変数を数値に変換する
  - 敬称はMr、Miss、Mrs、Master以外は数が少ないため、otherとして統合する
  - 文字列を数値に変換する：Label Encoding
  - 機械学習用のライブラリをインポートする
  - すべてのデータを学習データとテストデータに戻す
- **モデリング**
  - 決定木
  - ランダムフォレスト
  - LightGBM
  - LightGBMのライブラリをインポートする
  - 過学習と学習不足
  - ホールドアウト、クロスバリデーションを行うためのライブラリをインポートする
  - 学習データの２０％を検証データに分割する
  - LightGBM用のデータセットを作成する
  - ハイパーパラメーターを設定する
  - LightGBMによる機械学習モデルを学習させる
  - 各変数の重要度を調べる
  - 検証データで予測精度を確認
    - モデルを検証データに適用する
    - 予測精度を計測する
    - accuracyを計算するライブラリをインポートする
    - ハイパーパラメータを変更する
    - クロスバリデーションによる学習
    - テストデータにおける予測結果を算出する
    - 予測結果の平均をとる
    - submissionファイルを生成する
    - 結果をCSVとして書き出す
- **Kaggleに結果をsubmitする**
- **精度以外の分析視点**
  - 追加分析①：Titanicにはどのような人が乗船していたのか
    - チケットクラスごとの人数を確認する
    - 料金の分布を確認する
    - １等級チケットのうち、高額チケット（１等級チケットの上位２５％）をPclass0にする
    - Pclass2のうちFareが108より大きいものを０に変更する
    - チケットクラスごとの年齢の分布を確認する
    - 15歳より上の人に限定して再度確認する
    - 年齢と乗船料金の分布を確認する
    - チケットクラスごとの乗船家族人数を確認する
    - チケットクラスごとの男女比について確認する
    - 港ごとの違いを確認
  - 追加分析②：特定のクラスタに注目してみる
    - Cherbourgの若者の乗船料金の分布を調べる
    - 各乗船港ごとに１０代一人乗船客の平均料金を比較する
